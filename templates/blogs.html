<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <title>Insights - Inside Imaging</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='logo.png') }}">

  <script>
  (function(){
    try {
      var t = localStorage.getItem('theme');
      var preferLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
      var useLight = t ? (t === 'light') : preferLight;
      if (useLight) document.documentElement.classList.add('light');
    } catch(e) {}
  })();
  </script>

  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='blogs.css') }}">
</head>
<body>
  <div class="page-wrapper">
    <header class="navbar">
      <div class="navbar-brand">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Inside Imaging Logo" class="logo">
      </div>
      <nav class="nav-links">
        <a href="{{ url_for('projects') }}">Projects</a>
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <a href="{{ url_for('report_status') }}">Statistics</a>
        <a href="{{ url_for('team') }}">Our Team</a>
        <a href="{{ url_for('help_page') }}">Help</a>
      </nav>
      <div class="nav-auth">
          <label class="theme-switch" aria-label="Toggle theme">
            <span class="theme-row">
              <span class="theme-icon" aria-hidden="true">üåô</span>
              <input id="theme-toggle" class="theme-switch-input" type="checkbox" role="switch" aria-checked="false">
              <span class="theme-switch-track" aria-hidden="true"></span>
              <span class="theme-icon" aria-hidden="true">‚òÄÔ∏è</span>
            </span>
            <span id="theme-label" class="theme-switch-text">Dark mode</span>
          </label>
          {% if session.get('username') %}
          <div class="user-menu">
            <button class="user-menu-toggle" type="button" aria-expanded="false">
              <span class="user-name" aria-live="polite">{{ session.get('username') }}</span>
              <span class="user-caret" aria-hidden="true">‚ñæ</span>
            </button>
            <div class="user-menu-dropdown" role="menu" hidden>
              <a href="{{ url_for('profile') }}" role="menuitem">Profile</a>
              <a href="{{ url_for('logout') }}" role="menuitem">Log Out</a>
            </div>
          </div>
          {% else %}
          <a href="{{ url_for('login') }}" class="login-button">Log In</a>
          <a href="{{ url_for('signup') }}" class="signup-button">Sign Up</a>
          {% endif %}
      </div>
    </header>

    <main class="content blogs-page">
      <section class="blogs-hero">
        <h1>Insights</h1>
        <p>Perspectives from practicing radiologists on communication, technology, and patient partnership.</p>
      </section>

      {% if posts %}
      <nav class="blog-quick-links" aria-label="Jump to post">
        <div class="quick-links-inner">
          {% for post in posts %}
            <a class="quick-link" href="#post-{{ loop.index }}">{{ post.title }}</a>
          {% endfor %}
        </div>
      </nav>
      {% endif %}

      {% if posts %}
      <section class="blog-grid fullscreen-blogs" aria-label="Insights feed">
        {% for post in posts %}
        <article class="blog-card fullscreen" id="post-{{ loop.index }}">
          <div class="blog-hero">
            <div class="hero-content">
              <div class="hero-text">
                <h1 class="hero-title">{{ post.title }}</h1>
                <div class="hero-meta">
                  <span class="hero-author">{{ post.author }}</span>
                  {% if post.author_qualifications %}
                  <span class="hero-quals">{{ post.author_qualifications }}</span>
                  {% endif %}
                  <span class="hero-date">{{ post.date }}</span>
                  <span class="hero-readtime">{{ post.read_time }}</span>
                </div>
                <p class="hero-summary">{{ post.summary }}</p>
                <div class="hero-actions">
                  {% if post.url %}
                  <a class="btn-primary" href="{{ post.url }}">Open in magazine ‚Üí</a>
                  {% endif %}
                  {% if not loop.last %}
                  <a class="btn-secondary" href="#post-{{ loop.index + 1 }}">Next ‚Üí</a>
                  {% else %}
                  <a class="btn-secondary" href="#">Back to top</a>
                  {% endif %}
                </div>
              </div>
              <aside class="hero-author-panel">
                <div class="author-avatar-lg">
                  {% if post.author_image %}
                  <img src="{{ post.author_image }}" alt="{{ post.author }}" />
                  {% else %}
                  <div class="author-avatar-placeholder">{{ post.author[0] if post.author else 'A' }}</div>
                  {% endif %}
                </div>
                <h3 class="author-name-lg">{{ post.author }}</h3>
                <p class="author-quals-lg">{{ post.author_bio if post.author_bio else '' }}</p>
                {% if post.author_website %}
                <a class="author-link" href="{{ post.author_website }}" target="_blank" rel="noopener">Website</a>
                {% endif %}
              </aside>
            </div>
          </div>

          <div class="blog-content-wrap">
            {% if post.content %}
              <div class="blog-content">{{ post.content | safe }}</div>
            {% else %}
              <p class="blog-summary">{{ post.summary }}</p>
            {% endif %}
            <div class="blog-foot">
              <div class="author-byline">
                <strong>{{ post.author }}</strong>
                <div class="author-description">{{ post.author_bio if post.author_bio else '' }}</div>
              </div>
              <a class="back-top" href="#">Back to top ‚Üë</a>
            </div>
          </div>
        </article>
        {% endfor %}
      </section>
      {% else %}
      <section class="blog-submit">
        <h2>Want to contribute?</h2>
        <p>We are curating essays from radiology leaders. Share your ideas with our editorial team.</p>
        {% if submit_url %}
        <a href="{{ submit_url }}">Pitch a story ‚Üí</a>
        {% endif %}
      </section>
      {% endif %}

      <section class="blog-submit">
        <h2>Publish Your Perspective</h2>
        <p>We feature practical guidance, communication strategies, and patient-centered workflows. Submissions are reviewed weekly.</p>
        {% if submit_url %}
        <a href="{{ submit_url }}">Pitch a story ‚Üí</a>
        {% else %}
        <p>Email <strong>editor@insideimaging.example</strong> to submit a draft.</p>
        {% endif %}
      </section>
    </main>

    {% include '_footer.html' %}
  </div>

  <script src="{{ url_for('static', filename='theme.js') }}"></script>
  <script>
  // If page contains a hash, smooth-scroll the document to that element.
  (function(){
    function scrollToAnchor() {
      var hash = window.location.hash;
      if (!hash) return;
      var id = hash.replace(/^#/, '');
      var target = document.getElementById(id);
      if (!target) return;
      // slight delay to allow layout/paint
      setTimeout(function(){
        try { target.scrollIntoView({ behavior: 'smooth', block: 'start' }); } catch(e) { target.scrollIntoView(); }
      }, 60);
    }

    document.addEventListener('DOMContentLoaded', function(){ scrollToAnchor(); });
    window.addEventListener('hashchange', function(){ scrollToAnchor(); });
  })();
  </script>
</body>
</html>
