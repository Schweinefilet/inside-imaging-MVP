<!-- templates/base.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Inside Imaging{% endblock %}</title>
  <style>
    :root { --bg:#0b0c10; --fg:#e5e7eb; --accent:#60a5fa; }
    #loading-screen{position:fixed;inset:0;display:grid;place-items:center;background:
      radial-gradient(1200px 800px at 50% 50%,#111827 0%,var(--bg) 60%);color:var(--fg);z-index:9999;opacity:1;transition:opacity .28s ease}
    #loading-screen.hidden{opacity:0;pointer-events:none}
    .loader{display:grid;gap:18px;place-items:center}
    .ring{width:96px;height:96px;border-radius:50%;background:
      conic-gradient(from 0deg, transparent 0 12%, var(--accent) 12% 42%, transparent 42% 100%);
      -webkit-mask:radial-gradient(farthest-side,transparent calc(100% - 10px),#000 calc(100% - 10px));
      mask:radial-gradient(farthest-side,transparent calc(100% - 10px),#000 calc(100% - 10px));
      animation:spin 1.1s linear infinite;filter:drop-shadow(0 0 24px rgba(96,165,250,.5))}
    .dots{margin:0;font:600 16px ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";letter-spacing:.3px;display:inline-flex;align-items:baseline}
    .dot{display:inline-block;width:.6ch;text-align:center;animation:blink 1s infinite}
    .dot:nth-child(1){animation-delay:0s}.dot:nth-child(2){animation-delay:.2s}.dot:nth-child(3){animation-delay:.4s}
    @keyframes spin{to{transform:rotate(360deg)}} @keyframes blink{0%,20%{opacity:0}50%{opacity:1}100%{opacity:0}}
  </style>
</head>
<body>
  <!-- loader overlay available on every page -->
  <div id="loading-screen" aria-live="polite" aria-busy="true">
    <div class="loader">
      <div class="ring" aria-hidden="true"></div>
      <p class="dots" id="loading-text">Loading<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></p>
    </div>
  </div>

  <!-- page content -->
  <main id="app">{% block content %}{% endblock %}</main>

  <script>
    function showLoading(text){
      const el=document.getElementById('loading-screen');
      const txt=document.getElementById('loading-text');
      if(text && txt) txt.firstChild.nodeValue=text;
      if(el){ el.classList.remove('hidden'); el.setAttribute('aria-busy','true'); }
    }
    function hideLoading(){
      const el=document.getElementById('loading-screen');
      if(el){ el.classList.add('hidden'); el.setAttribute('aria-busy','false'); }
    }
    window.addEventListener('load',()=>setTimeout(hideLoading,10000));
    // auto-show on any form submit
    addEventListener('submit', e => { if(e.target.tagName==='FORM') showLoading('Processing'); }, true);
  </script>
</body>
</html>
